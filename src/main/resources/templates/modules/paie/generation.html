<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}">Génération bulletins</title>
    <style>
        .generation-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .alert {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>

<body>
    <div class="generation-container">
        <h1 th:text="${pageTitle}">Génération des bulletins de paie</h1>

        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
        <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

        <div class="paie-card">
            <form method="post" action="/modules/paie/generer-bulletins">
                <div class="form-group">
                    <label for="mois">Mois</label>
                    <select id="mois" name="mois" class="form-control" required>
                        <option value="">Sélectionner le mois</option>
                        <option value="1">Janvier</option>
                        <option value="2">Février</option>
                        <option value="3">Mars</option>
                        <option value="4">Avril</option>
                        <option value="5">Mai</option>
                        <option value="6">Juin</option>
                        <option value="7">Juillet</option>
                        <option value="8">Août</option>
                        <option value="9">Septembre</option>
                        <option value="10">Octobre</option>
                        <option value="11">Novembre</option>
                        <option value="12">Décembre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="personnelId">Employé</label>
                    <select id="personnelId" name="personnelId" class="form-control" required>
                        <option value="">Sélectionner un employé</option>
                        <th:block th:each="personnel : ${personnels}">
                            <option th:value="${personnel.id}"
                                th:text="${personnel.person.nom} + ' ' + ${personnel.person.prenom}"></option>
                        </th:block>
                    </select>
                </div>

                <div class="form-group">
                    <label for="annee">Année</label>
                    <input type="number" id="annee" name="annee" class="form-control" min="2020" max="2030" required
                        th:value="${#temporals.year(#temporals.createNow())}">
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" name="recalculer" value="true">
                        Forcer le recalcul même si bulletins existants
                    </label>
                </div>

                <button type="submit" class="btn btn-primary">Générer les bulletins</button>
                <a href="/modules/paie/bulletins" class="btn">Annuler</a>
            </form>
        </div>

        <div class="paie-card">
            <h3>Informations</h3>
            <p>La génération inclura :</p>
            <ul>
                <li>Salaire de base depuis les contrats</li>
                <li>Primes récurrentes et ponctuelles</li>
                <li>Heures supplémentaires validées</li>
                <li>Calcul automatique des cotisations (CNAPS, OSTIE, IRSA)</li>
                <li>Génération des PDF individuels</li>
            </ul>
        </div>
    </div>
</body>

</html>